{"ast":null,"code":"import { createAction, handleActions } from \"redux-actions\";\nimport { produce } from \"immer\";\nimport { firestore } from \"../../shared/firebase\";\nconst SET_POST = \"SET_POST\";\nconst ADD_POST = \"ADD_POST\";\nconst setPost = createAction(SET_POST, post_list => ({\n  post_list\n}));\nconst addPost = createAction(ADD_POST, post => ({\n  post\n}));\nconst initialState = {\n  list: []\n}; // 게시글 하나에는 어떤 정보가 있어야 하는 지 예시 하나 만들어두기\n\nconst initialPost = {\n  // user_info: {\n  // \tid: 0,\n  //   user_name: \"mean0\",\n  //   user_profile: \"hhttps://cdn.mkhealth.co.kr/news/photo/202004/img_MKH200424005_0.jpg\",\n  // },\n  // image_url: \"https://cdn.mkhealth.co.kr/news/photo/202004/img_MKH200424005_0.jpg\",\n  url: \"https://blog.naver.com/resumake/222603947125\",\n  contents: \"면접준비\",\n  // comment_cnt: 10,\n  insert_dt: \"2021-02-27 10:00:00\"\n};\n\nconst getPostFB = () => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    const postDB = firestore.collection(\"post\");\n    postDB.get().then(docs => {\n      let post_list = [];\n      docs.forEach(doc => {\n        // 잘 가져왔나 확인하기! :)\n        // 앗! DB에서 가져온 것하고 우리가 Post 컴포넌트에서 쓰는 데이터 모양새가 다르네요!\n        // console.log(doc.id, doc.data());\n        // 데이터 모양을 맞춰주자!\n        let _post = doc.data();\n\n        let post = {\n          id: doc.id,\n          user_info: {\n            user_name: _post.user_name,\n            user_profile: _post.user_profile,\n            user_id: _post.user_id\n          },\n          contents: _post.contents,\n          image_url: _post.image_url,\n          comment_cnt: _post.comment_cnt,\n          imsert_dt: _post.insert_dt\n        };\n        post_list.push(post);\n      }); // 리스트 확인하기!\n\n      console.log(post_list);\n      dispatch(setPost(post_list));\n    });\n  };\n}; // reducer\n\n\nexport default handleActions({\n  [SET_POST]: (state, action) => produce(state, draft => {}),\n  [ADD_POST]: (state, action) => produce(state, draft => {})\n}, initialState); // action creator export\n\nconst actionCreators = {\n  setPost,\n  addPost,\n  getPostFB\n};\nexport { actionCreators };","map":{"version":3,"sources":["/Users/eunji/Desktop/은지/Test2/test2/src/redux/modules/post.js"],"names":["createAction","handleActions","produce","firestore","SET_POST","ADD_POST","setPost","post_list","addPost","post","initialState","list","initialPost","url","contents","insert_dt","getPostFB","dispatch","getState","history","postDB","collection","get","then","docs","forEach","doc","_post","data","id","user_info","user_name","user_profile","user_id","image_url","comment_cnt","imsert_dt","push","console","log","state","action","draft","actionCreators"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,aAAvB,QAA4C,eAA5C;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,SAASC,SAAT,QAA0B,uBAA1B;AAEA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,QAAQ,GAAG,UAAjB;AAEA,MAAMC,OAAO,GAAGN,YAAY,CAACI,QAAD,EAAYG,SAAD,KAAgB;AAACA,EAAAA;AAAD,CAAhB,CAAX,CAA5B;AACA,MAAMC,OAAO,GAAGR,YAAY,CAACK,QAAD,EAAYI,IAAD,KAAW;AAACA,EAAAA;AAAD,CAAX,CAAX,CAA5B;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,IAAI,EAAE;AADW,CAArB,C,CAIA;;AACA,MAAMC,WAAW,GAAG;AAClB;AACD;AACC;AACA;AACA;AACA;AACAC,EAAAA,GAAG,EAAE,8CAPa;AAQlBC,EAAAA,QAAQ,EAAE,MARQ;AASlB;AACAC,EAAAA,SAAS,EAAE;AAVO,CAApB;;AAaA,MAAMC,SAAS,GAAG,MAAM;AACtB,SAAO,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AAAEC,IAAAA;AAAF,GAA9B,EAA2C;AAChD,UAAMC,MAAM,GAAGjB,SAAS,CAACkB,UAAV,CAAqB,MAArB,CAAf;AAEAD,IAAAA,MAAM,CAACE,GAAP,GAAaC,IAAb,CAAmBC,IAAD,IAAU;AAC1B,UAAIjB,SAAS,GAAG,EAAhB;AAEAiB,MAAAA,IAAI,CAACC,OAAL,CAAcC,GAAD,IAAS;AACpB;AACA;AACA;AAEA;AACA,YAAIC,KAAK,GAAGD,GAAG,CAACE,IAAJ,EAAZ;;AACA,YAAInB,IAAI,GAAG;AACPoB,UAAAA,EAAE,EAAEH,GAAG,CAACG,EADD;AAEPC,UAAAA,SAAS,EAAE;AACPC,YAAAA,SAAS,EAAEJ,KAAK,CAACI,SADV;AAEPC,YAAAA,YAAY,EAAEL,KAAK,CAACK,YAFb;AAGPC,YAAAA,OAAO,EAAEN,KAAK,CAACM;AAHR,WAFJ;AAOPnB,UAAAA,QAAQ,EAAEa,KAAK,CAACb,QAPT;AAQPoB,UAAAA,SAAS,EAAEP,KAAK,CAACO,SARV;AASPC,UAAAA,WAAW,EAAER,KAAK,CAACQ,WATZ;AAUPC,UAAAA,SAAS,EAAET,KAAK,CAACZ;AAVV,SAAX;AAaAR,QAAAA,SAAS,CAAC8B,IAAV,CAAe5B,IAAf;AACD,OArBD,EAH0B,CA0B1B;;AACA6B,MAAAA,OAAO,CAACC,GAAR,CAAYhC,SAAZ;AAEAU,MAAAA,QAAQ,CAACX,OAAO,CAACC,SAAD,CAAR,CAAR;AACD,KA9BD;AA+BD,GAlCD;AAmCD,CApCD,C,CAsCA;;;AACA,eAAeN,aAAa,CACxB;AACI,GAACG,QAAD,GAAY,CAACoC,KAAD,EAAQC,MAAR,KAAmBvC,OAAO,CAACsC,KAAD,EAASE,KAAD,IAAW,CAExD,CAFqC,CAD1C;AAKI,GAACrC,QAAD,GAAY,CAACmC,KAAD,EAAQC,MAAR,KAAmBvC,OAAO,CAACsC,KAAD,EAASE,KAAD,IAAW,CAExD,CAFqC;AAL1C,CADwB,EAUxBhC,YAVwB,CAA5B,C,CAaE;;AACF,MAAMiC,cAAc,GAAG;AACnBrC,EAAAA,OADmB;AAEnBE,EAAAA,OAFmB;AAGnBQ,EAAAA;AAHmB,CAAvB;AAME,SAAS2B,cAAT","sourcesContent":["import { createAction, handleActions } from \"redux-actions\";\nimport { produce } from \"immer\";\n\nimport { firestore } from \"../../shared/firebase\";\n\nconst SET_POST = \"SET_POST\";\nconst ADD_POST = \"ADD_POST\";\n\nconst setPost = createAction(SET_POST, (post_list) => ({post_list}));\nconst addPost = createAction(ADD_POST, (post) => ({post}));\n\nconst initialState = {\n    list: [],\n}\n\n// 게시글 하나에는 어떤 정보가 있어야 하는 지 예시 하나 만들어두기\nconst initialPost = {\n  // user_info: {\n\t// \tid: 0,\n  //   user_name: \"mean0\",\n  //   user_profile: \"hhttps://cdn.mkhealth.co.kr/news/photo/202004/img_MKH200424005_0.jpg\",\n  // },\n  // image_url: \"https://cdn.mkhealth.co.kr/news/photo/202004/img_MKH200424005_0.jpg\",\n  url: \"https://blog.naver.com/resumake/222603947125\",\n  contents: \"면접준비\",\n  // comment_cnt: 10,\n  insert_dt: \"2021-02-27 10:00:00\",\n};\n\nconst getPostFB = () => {\n  return function (dispatch, getState, { history }) {\n    const postDB = firestore.collection(\"post\");\n\n    postDB.get().then((docs) => {\n      let post_list = [];\n\n      docs.forEach((doc) => {\n        // 잘 가져왔나 확인하기! :)\n        // 앗! DB에서 가져온 것하고 우리가 Post 컴포넌트에서 쓰는 데이터 모양새가 다르네요!\n        // console.log(doc.id, doc.data());\n\n        // 데이터 모양을 맞춰주자!\n        let _post = doc.data();\n        let post = {\n            id: doc.id,\n            user_info: {\n                user_name: _post.user_name,\n                user_profile: _post.user_profile,\n                user_id: _post.user_id,\n            },\n            contents: _post.contents,\n            image_url: _post.image_url,\n            comment_cnt: _post.comment_cnt,\n            imsert_dt: _post.insert_dt\n        }\n\n        post_list.push(post);\n      });\n\n      // 리스트 확인하기!\n      console.log(post_list);\n\n      dispatch(setPost(post_list));\n    });\n  };\n};\n\n// reducer\nexport default handleActions(\n    {\n        [SET_POST]: (state, action) => produce(state, (draft) => {\n          \n        }),\n  \n        [ADD_POST]: (state, action) => produce(state, (draft) => {\n            \n        })\n    },\n    initialState\n  );\n\n  // action creator export\nconst actionCreators = {\n    setPost,\n    addPost,\n    getPostFB,\n  };\n  \n  export { actionCreators };"]},"metadata":{},"sourceType":"module"}