{"ast":null,"code":"import { createAction, handleActions } from \"redux-actions\";\nimport { produce } from \"immer\";\nimport { setCookie, getCookie, deleteCookie } from \"../../shared/Cookie\";\nconst LOG_IN = \"LOG_IN\";\nconst LOG_OUT = \"LOG_OUT\";\nconst GET_USER = \"GET_USER\";\nconst logIn = createAction(LOG_IN, user => ({\n  user\n}));\nconst logOut = createAction(LOG_OUT, user => ({\n  user\n}));\nconst getUser = createAction(GET_USER, user => ({\n  user\n}));\nconst initialState = {\n  user: null,\n  is_login: false\n};\n\nconst loginAction = user => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    dispatch(logIn(user));\n    history.push('/');\n  };\n};\n\nexport default handleActions({\n  [LOG_IN]: (state, action) => produce(state, draft => {\n    setCookie(\"is_login\", \"success\");\n    draft.user = action.payload.user;\n    draft.is_login = true;\n  }),\n  [LOG_OUT]: (state, action) => produce(state, draft => {\n    deleteCookie(\"is_login\");\n    draft.user = null;\n    draft.is_login = false;\n  }),\n  [GET_USER]: (state, action) => produce(state, draft => {})\n}, initialState);\nconst actionCreators = {\n  logIn,\n  getUser,\n  logOut,\n  loginAction\n};\nexport { actionCreators };","map":{"version":3,"sources":["/Users/eunji/Desktop/은지/sparta/react_middleage/image-community/src/redux/modules/user.js"],"names":["createAction","handleActions","produce","setCookie","getCookie","deleteCookie","LOG_IN","LOG_OUT","GET_USER","logIn","user","logOut","getUser","initialState","is_login","loginAction","dispatch","getState","history","push","state","action","draft","payload","actionCreators"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,aAAvB,QAA4C,eAA5C;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,SAASC,SAAT,EAAoBC,SAApB,EAA+BC,YAA/B,QAAmD,qBAAnD;AAEA,MAAMC,MAAM,GAAG,QAAf;AACA,MAAMC,OAAO,GAAG,SAAhB;AACA,MAAMC,QAAQ,GAAG,UAAjB;AAEA,MAAMC,KAAK,GAAGT,YAAY,CAACM,MAAD,EAAUI,IAAD,KAAW;AAAEA,EAAAA;AAAF,CAAX,CAAT,CAA1B;AACA,MAAMC,MAAM,GAAGX,YAAY,CAACO,OAAD,EAAWG,IAAD,KAAW;AAAEA,EAAAA;AAAF,CAAX,CAAV,CAA3B;AACA,MAAME,OAAO,GAAGZ,YAAY,CAACQ,QAAD,EAAYE,IAAD,KAAW;AAAEA,EAAAA;AAAF,CAAX,CAAX,CAA5B;AAEA,MAAMG,YAAY,GAAG;AACjBH,EAAAA,IAAI,EAAE,IADW;AAEjBI,EAAAA,QAAQ,EAAE;AAFO,CAArB;;AAKE,MAAMC,WAAW,GAAIL,IAAD,IAAU;AAC5B,SAAO,UAAUM,QAAV,EAAoBC,QAApB,EAA8B;AAACC,IAAAA;AAAD,GAA9B,EAAyC;AAC5CF,IAAAA,QAAQ,CAACP,KAAK,CAACC,IAAD,CAAN,CAAR;AACAQ,IAAAA,OAAO,CAACC,IAAR,CAAa,GAAb;AACH,GAHD;AAIH,CALC;;AAOA,eAAelB,aAAa,CAC1B;AACE,GAACK,MAAD,GAAU,CAACc,KAAD,EAAQC,MAAR,KACRnB,OAAO,CAACkB,KAAD,EAASE,KAAD,IAAW;AACxBnB,IAAAA,SAAS,CAAC,UAAD,EAAa,SAAb,CAAT;AACAmB,IAAAA,KAAK,CAACZ,IAAN,GAAaW,MAAM,CAACE,OAAP,CAAeb,IAA5B;AACQY,IAAAA,KAAK,CAACR,QAAN,GAAiB,IAAjB;AACT,GAJM,CAFX;AAOM,GAACP,OAAD,GAAW,CAACa,KAAD,EAAQC,MAAR,KACbnB,OAAO,CAACkB,KAAD,EAASE,KAAD,IAAW;AACxBjB,IAAAA,YAAY,CAAC,UAAD,CAAZ;AACAiB,IAAAA,KAAK,CAACZ,IAAN,GAAa,IAAb;AACQY,IAAAA,KAAK,CAACR,QAAN,GAAiB,KAAjB;AACT,GAJM,CARX;AAaE,GAACN,QAAD,GAAY,CAACY,KAAD,EAAQC,MAAR,KAAmBnB,OAAO,CAACkB,KAAD,EAASE,KAAD,IAAW,CAAE,CAArB;AAbxC,CAD0B,EAgB1BT,YAhB0B,CAA5B;AAmBA,MAAMW,cAAc,GAAG;AACrBf,EAAAA,KADqB;AAErBG,EAAAA,OAFqB;AAGrBD,EAAAA,MAHqB;AAIrBI,EAAAA;AAJqB,CAAvB;AAOA,SAASS,cAAT","sourcesContent":["import { createAction, handleActions } from \"redux-actions\";\nimport { produce } from \"immer\";\n\nimport { setCookie, getCookie, deleteCookie } from \"../../shared/Cookie\";\n\nconst LOG_IN = \"LOG_IN\";\nconst LOG_OUT = \"LOG_OUT\";\nconst GET_USER = \"GET_USER\";\n\nconst logIn = createAction(LOG_IN, (user) => ({ user }));\nconst logOut = createAction(LOG_OUT, (user) => ({ user }));\nconst getUser = createAction(GET_USER, (user) => ({ user }));\n\nconst initialState = {\n    user: null,\n    is_login: false,\n  };\n\n  const loginAction = (user) => {\n    return function (dispatch, getState, {history}) {\n        dispatch(logIn(user));\n        history.push('/');\n    }\n}\n\n  export default handleActions(\n    {\n      [LOG_IN]: (state, action) =>\n        produce(state, (draft) => {\n          setCookie(\"is_login\", \"success\");\n          draft.user = action.payload.user;\n                  draft.is_login = true;\n        }),\n          [LOG_OUT]: (state, action) =>\n        produce(state, (draft) => {\n          deleteCookie(\"is_login\");\n          draft.user = null;\n                  draft.is_login = false;\n        }),\n      [GET_USER]: (state, action) => produce(state, (draft) => {}),\n    },\n    initialState\n  );\n\n  const actionCreators = {\n    logIn,\n    getUser,\n    logOut,\n    loginAction,\n  };\n  \n  export { actionCreators };"]},"metadata":{},"sourceType":"module"}