{"ast":null,"code":"import { createAction, handleActions } from \"redux-actions\";\nimport { produce } from \"immer\";\nimport { setCookie, getCookie, deleteCookie } from \"../../shared/Cookie\";\nimport { auth } from \"../../shared/firebase\"; // actions\n\nconst LOG_OUT = \"LOG_OUT\";\nconst GET_USER = \"GET_USER\";\nconst SET_USER = \"SET_USER\"; // action creators\n\nconst logOut = createAction(LOG_OUT, user => ({\n  user\n}));\nconst getUser = createAction(GET_USER, user => ({\n  user\n}));\nconst setUser = createAction(SET_USER, user => ({\n  user\n})); // initialState\n\nconst initialState = {\n  user: null,\n  is_login: false\n}; // middleware actions\n\nconst loginAction = user => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    dispatch(setUser(user));\n    history.push('/');\n  };\n};\n\nconst signupFB = (id, pwd, user_name) => {\n  return function (dispatch, getState, {\n    history\n  }) {\n    auth.createUserWithEmailAndPassword(id, pwd).then(user => {\n      console.log(user);\n      auth.currentUser.updateProfile({\n        displayName: user_name\n      }).then(() => {\n        dispatch(setUser({\n          user_name: user_name,\n          id: id,\n          user_profile: ''\n        }));\n        history.push('/');\n      }).catch(error => {\n        console.log(error);\n      }); // Signed in\n      // ...\n    }).catch(error => {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(errorCode, errorMessage); // ..\n    });\n  };\n}; // reducer\n\n\nexport default handleActions({\n  [SET_USER]: (state, action) => produce(state, draft => {\n    setCookie(\"is_login\", \"success\");\n    draft.user = action.payload.user;\n    draft.is_login = true;\n  }),\n  [LOG_OUT]: (state, action) => produce(state, draft => {\n    deleteCookie(\"is_login\");\n    draft.user = null;\n    draft.is_login = false;\n  }),\n  [GET_USER]: (state, action) => produce(state, draft => {})\n}, initialState); // action creator export\n\nconst actionCreators = {\n  getUser,\n  logOut,\n  loginAction,\n  signupFB\n};\nexport { actionCreators };","map":{"version":3,"sources":["/Users/eunji/Desktop/은지/sparta/react_middleage/image-community/src/redux/modules/user.js"],"names":["createAction","handleActions","produce","setCookie","getCookie","deleteCookie","auth","LOG_OUT","GET_USER","SET_USER","logOut","user","getUser","setUser","initialState","is_login","loginAction","dispatch","getState","history","push","signupFB","id","pwd","user_name","createUserWithEmailAndPassword","then","console","log","currentUser","updateProfile","displayName","user_profile","catch","error","errorCode","code","errorMessage","message","state","action","draft","payload","actionCreators"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from \"redux-actions\";\nimport { produce } from \"immer\";\n\nimport { setCookie, getCookie, deleteCookie } from \"../../shared/Cookie\";\n\nimport { auth } from \"../../shared/firebase\";\n\n// actions\nconst LOG_OUT = \"LOG_OUT\";\nconst GET_USER = \"GET_USER\";\nconst SET_USER = \"SET_USER\";\n\n// action creators\nconst logOut = createAction(LOG_OUT, (user) => ({ user }));\nconst getUser = createAction(GET_USER, (user) => ({ user }));\nconst setUser = createAction(SET_USER, (user) => ({ user }));\n\n// initialState\nconst initialState = {\n    user: null,\n    is_login: false,\n  };\n\n// middleware actions\n  const loginAction = (user) => {\n    return function (dispatch, getState, {history}) {\n        dispatch(setUser(user));\n        history.push('/');\n    }\n}\n\nconst signupFB = (id, pwd, user_name) => {\n  return function (dispatch, getState, {history}){\n\n    auth\n      .createUserWithEmailAndPassword(id, pwd)\n      .then((user) => {\n\n        console.log(user);\n        \n        auth.currentUser.updateProfile({\n          displayName: user_name,\n        }).then(()=>{\n          dispatch(setUser({user_name: user_name, id: id, user_profile: ''}));\n          history.push('/');\n        }).catch((error) => {\n          console.log(error);\n        });\n\n        // Signed in\n        // ...\n      })\n      .catch((error) => {\n        var errorCode = error.code;\n        var errorMessage = error.message;\n\n        console.log(errorCode, errorMessage);\n        // ..\n      });\n\n  }\n}\n\n// reducer\n  export default handleActions(\n    {\n      [SET_USER]: (state, action) =>\n        produce(state, (draft) => {\n          setCookie(\"is_login\", \"success\");\n          draft.user = action.payload.user;\n                  draft.is_login = true;\n        }),\n          [LOG_OUT]: (state, action) =>\n        produce(state, (draft) => {\n          deleteCookie(\"is_login\");\n          draft.user = null;\n                  draft.is_login = false;\n        }),\n      [GET_USER]: (state, action) => produce(state, (draft) => {}),\n    },\n    initialState\n  );\n\n  // action creator export\n  const actionCreators = {\n    getUser,\n    logOut,\n    loginAction,\n    signupFB,\n  };\n  \n  export { actionCreators };"]},"metadata":{},"sourceType":"module"}